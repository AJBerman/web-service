<!-- Navigate through composition levels -->
<app-breadcrumb [views]="views"></app-breadcrumb>

<!-- The Visual Graph -->
<div id="d3-editor"
     (click)="closeContextMenu(); updateSelected()"
     (mouseup)="detectRightMouseClick($event); addEdge($event);"
     oncontextmenu="return false">
</div>

<!---------------------------------------------------->
<!------------------ Modals -------------------------->
<!---------------------------------------------------->

<!-- Quick Edit Modal -->
<template #content
          let-close="close"
          let-dismiss="dismiss">

  <app-quick-edit [node]="graph.state.selectedNode"
                  [closeFunction]="close"></app-quick-edit>
  <div class="modal-footer">
  </div>
</template>

<!-- No composition nodes warning modal -->
<template #emptyCompositionModal
          let-c="close"
          let-d="dismiss">

  <div class="modal-header text-center">
    <h4>Warning</h4>
    <button type="button"
            class="close"
            aria-label="Close"
            (click)="d('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <div class="modal-body text-center">
    <p> There are no composition nodes here. </p>
  </div>

  <div class="modal-footer">
    <button type="button"
            class="btn btn-secondary"
            (click)="c('Close click')">Close</button>
  </div>
</template>


<!-- view selected node in json -->
<template #debugModal
          let-c="close"
          let-d="dismiss">

  <div class="modal-body text-center">
    <pre>{{selectedNode.neighbors.length | json}}</pre>
    <pre>{{selectedNode.neighbors | json}}</pre>
  </div>

  <div class="modal-footer">
    <button type="button"
            class="btn btn-secondary"
            (click)="c('Close click')">Close</button>
  </div>
</template>

<!------------------------------------------------------>
<!-------------------- CONTENT MENU -------------------->
<!------------------------------------------------------>
<div class="rightClickPanel"
     [ngStyle]="rightPanelStyle">

  <div class="dropdown show">
    <div class="dropdown-menu">
      <a class="dropdown-item"
         (click)="insertNode($event)">Insert</a>
      <a class="dropdown-item"
         (click)="removeSelected()">Delete</a>
      <a class="dropdown-item"
         (click)="edit(content)">Edit</a>
      <a class="dropdown-item"
         (click)="viewComposition(emptyCompositionModal)">View Composition</a>
      <a class="dropdown-item"
         (click)="returnToParent()">Return to Parent</a>
      <a class="dropdown-item disabled">Composite</a>
      <a class="dropdown-item"
         (click)="debugNode(debugModal)">Debug Selected Node</a>
    </div>
  </div>
</div>
